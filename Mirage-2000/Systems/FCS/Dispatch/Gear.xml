<?xml version="1.0" encoding="iso-8859-1"?>
<!-- 
	Authors: Josh Davidson (Octal450), Richard Harrison, Axel Paccalin.
	Version: 0.2
	
	System to dispatch both direct pilot commands and the normalized FBW steering channel 
	to the appropriate actuators on the landing gear. 
-->

<system name="Mirage-2000: FCS/Dispatch">	
	<channel name="Gear">
		<!-- The direct pilot demand for gear position -->
		<pure_gain name="fcs/dispatch/gear/pos-output">
			<input> gear/gear-cmd-norm </input>
			<gain> 1 </gain>
			<clipto>
				<min> 0 </min>
				<max> 1 </max>
			</clipto>
		</pure_gain>

		<!-- FBW steering wheel position demand in (degrees) -->
		<pure_gain name="fcs/dispatch/gear/fbw-steering-output">
			<input> fcs/fbw/steering/output </input>
			<gain> 45.0 </gain>
			<clipto>
				<min> -45.0</min>
				<max>  45.0</max>
			</clipto>
		</pure_gain>

		<!-- Command for the steering (toggled by the FBW mode switching mechanism). -->
		<switch name="fcs/dispatch/gear/steering-output">
			<default value="0"/>
			<test logic="OR" value="fcs/dispatch/gear/fbw-steering-output">
				fcs/fbw/mode eq 1
				fcs/fbw/mode eq 0
			</test>
			<test logic="OR" value="fcs/dispatch/dist/steering">
				fcs/fbw/mode eq 2
			</test>
		</switch>

		<!-- The left brake pilot demand -->
		<pure_gain name="fcs/dispatch/gear/brake-l-output">
			<input> /controls/gear/brake-left </input>
			<gain> 1 </gain>
			<clipto>
				<min> 0 </min>
				<max> 1 </max>
			</clipto>
		</pure_gain>

		<!-- The right brake pilot demand -->
		<pure_gain name="fcs/dispatch/gear/brake-r-output">
			<input> /controls/gear/brake-right </input>
			<gain> 1 </gain>
			<clipto>
				<min> 0 </min>
				<max> 1 </max>
			</clipto>
		</pure_gain>

		<!-- The park brake pilot demand -->
		<pure_gain name="fcs/dispatch/gear/brake-p-output">
			<input> /controls/gear/brake-parking </input>
			<gain> 1 </gain>
			<clipto>
				<min> 0 </min>
				<max> 1 </max>
			</clipto>
		</pure_gain>
	</channel>
</system>